<!doctype html>
<html data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <title>Nightreign Effect Tool</title>

    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@2/css/pico.min.css">
    <link rel="stylesheet" href="../styles/breakpoints.css">
    <link rel="stylesheet" href="../styles/site.css">
    <link rel="stylesheet" href="../styles/reliquary/layout.css">
    <link rel="stylesheet" href="../styles/reliquary/results.css">
    <link rel="stylesheet" href="../styles/reliquary/components.css">
    <link rel="stylesheet" href="../styles/reliquary/details.css">
    <!-- MUST be last -->
    <link rel="stylesheet" href="../styles/reliquary/overrides.css">
    <link rel="icon" type="image/png" href="../Assets/logo_square.png">

    <meta name="viewport" content="width=device-width, initial-scale=1" />
                            <span class="pill pill--auto-sort" data-auto-sort-pill hidden>Auto-Sort Off</span>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WT87FT9EYB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      const isProd = location.hostname === 'paraphrazetutorials.github.io' && location.pathname.startsWith('/nightreign-data-tools');
      if (isProd) {
        gtag('config', 'G-WT87FT9EYB');
      }
    </script>
  </head>

  <body>
    <main class="app-shell app-grid">

      <!-- HERO (global renderer) -->
      <header
        id="globalHero"
        class="hero hero--reliquary"
        data-hero-image="../Assets/home/Reliquary_2.png"
        data-hero-h1="The Round Table Codex"
        data-hero-h2="Reliquary"
        data-hero-build="true"
      ></header>

      <!-- NAV (global) -->
      <nav id="globalNav" class="tool-nav" aria-label="Primary navigation"></nav>

      <section class="tool-shell">

        <!-- Mobile mode toggle (mirrors Lexicon dataset toggle) -->
        <button
          id="reliqModeToggle"
          class="reliq-mode-toggle"
          type="button"
          aria-expanded="false"
          aria-controls="individualMode"
        >
          <span class="reliq-mode-toggle__label">Individual Relics</span>
          <span class="reliq-mode-toggle__chevron" aria-hidden="true"></span>
        </button>

        <!-- UTILITY BAR (Filters + Actions) -->
        <section id="utilityBar" class="utility-bar" aria-label="Reliquary controls">
          <div class="utility-bar__col utility-bar__col--left">
            <div id="modeTabsHomeSlot" class="mode-tabs-slot mode-tabs-slot--home">
              <div id="modeSwitchGroup" class="mode-switch-group">
                <div class="mode-tabs mode-tabs--tight" id="modeTabs" role="tablist" aria-label="Reliquary mode tabs">
                  <button
                    id="modeIndividualBtn"
                    class="mode-tab is-active"
                    type="button"
                    role="tab"
                    aria-selected="true"
                    tabindex="0"
                    data-mode="individual"
                  >Individual Relics</button>
                  <button
                    id="modeChaliceBtn"
                    class="mode-tab"
                    type="button"
                    role="tab"
                    aria-selected="false"
                    tabindex="-1"
                    data-mode="chalice"
                  >Chalice Builder</button>
                </div>
                <small class="subtext mode-toggle__hint" data-mode-hint>Switch between the classic relic view or the new chalice builder prototype.</small>
              </div>
            </div>
          </div>

        </section>

        <!-- Hidden popover sources for Instructions / Disclaimer -->
        <div class="utility-popover-source" id="instructionsPopover" hidden>
          <div class="popover-title">Relic Builder Instructions</div>
          <div class="popover-body">
            <p>Pick your class and relic type, add effects in the Relic Preview, and the tool will live-check legality, ordering, required curses, and show probability plus row indicators as you go.</p>

            <div class="legend-section">
              <h5>Relic Types</h5>
              <ul class="legend-list">
                <li class="legend-item legend-item--full">
                  <div class="legend-text"><strong>Standard Relics:</strong> Only shows effects that can appear on Standard relics.</div>
                </li>
                <li class="legend-item legend-item--full">
                  <div class="legend-text"><strong>Depth of Night Relics:</strong> Only shows effects that can appear on Depth of Night relics.</div>
                </li>
                <li class="legend-item legend-item--full">
                  <div class="legend-text"><strong>Shared Effects:</strong> Some effects can live on either type of relic. These effects won't be filtered out of either relic type.</div>
                </li>
              </ul>
            </div>

            <div class="legend-section">
              <h5>Curses</h5>
              <ul class="legend-list">
                <li class="legend-item legend-item--pillline">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <button type="button" class="curse-btn legend-curse-btn" aria-label="Select a Curse" title="Select a Curse" disabled aria-disabled="true" tabindex="-1">Select Curse</button>
                  </span>
                  <div class="legend-text"><strong>Curse required:</strong> Some Depth of Night effects require a curse to be valid. Select a curse from the list to make a valid effect.</div>
                </li>
              </ul>
            </div>

            <div class="legend-section">
              <h5>Buttons</h5>
              <ul class="legend-list">
                <li class="legend-item">
                  <span class="legend-icon" aria-hidden="true">
                    <span class="legend-toggle-btn legend-toggle-btn--illegal-on">
                      <svg viewBox="0 0 24 24" focusable="false" aria-hidden="true">
                        <path d="M5.75 5.75L18.25 18.25M12 21C7.029 21 3 16.971 3 12S7.029 3 12 3s9 4.029 9 9-4.029 9-9 9Z" fill="none" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                    </span>
                  </span>
                  <div class="legend-text"><strong>Show Illegal Combinations:</strong> Removes the safeties put in place to ensure your combinations are valid. Use with caution.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon" aria-hidden="true">
                    <span class="legend-toggle-btn legend-toggle-btn--autosort-on">
                      <svg viewBox="0 0 24 24" focusable="false" aria-hidden="true">
                        <path d="M8 5l-3 3 3 3M8 8h8M16 19l3-3-3-3M16 16H8" fill="none" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                    </span>
                  </span>
                  <div class="legend-text"><strong>Auto-Sort:</strong> Reorders effects to ensure they are in their proper Roll Order. Turning this off may cause invalid combinations; use with caution.</div>
                </li>
              </ul>
            </div>

            <div class="legend-section">
              <h5>Effect Icons</h5>
              <ul class="legend-list">
                <li class="legend-item">
                  <span class="legend-icon legend-icon--indicator legend-icon--bare" aria-hidden="true">
                    <span class="move-indicator move-up legend-move" style="--icon-size: 1.2rem;"><span class="carrot"></span></span>
                    <span class="move-indicator move-down legend-move" style="--icon-size: 1.2rem;"><span class="carrot"></span></span>
                  </span>
                  <div class="legend-text"><strong>Red arrows:</strong> Only appearing when Auto-Sort is tunred off, these arrows indicate the direction the effect must be moved to be a valid Roll Order.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--indicator legend-icon--bare" aria-hidden="true">
                    <span class="move-indicator move-ok legend-move" style="--icon-size: 1.2rem;"><span class="check-box"></span></span>
                  </span>
                  <div class="legend-text"><strong>Green check:</strong> Indicates the effect is good to go; no change needed.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <button type="button" class="icon-btn swap-btn legend-row-btn" aria-label="Change Effect" title="Change Effect">⇄</button>
                  </span>
                  <div class="legend-text"><strong>Change Effect</strong> Change the effect or curse in the selected row.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <button type="button" class="icon-btn info-btn legend-row-btn" aria-label="Show Effect Info" title="Show Effect Info">i</button>
                  </span>
                  <div class="legend-text"><strong>Information:</strong> Open detailed information about the effect or curse.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <button type="button" class="icon-btn clear-btn legend-row-btn" aria-label="Clear Effect" title="Clear Effect">×</button>
                  </span>
                  <div class="legend-text"><strong>Clear Effect:</strong> Remove the effect from this slot.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <button type="button" class="icon-btn copy-id-btn legend-row-btn" aria-label="Copy Effect ID" title="Copy Effect ID">
                      <span class="effect-copy-icon" aria-hidden="true"></span>
                    </button>
                  </span>
                  <div class="legend-text"><strong>Copy EffectID:</strong> Copy the EffectID to your clipboard.</div>
                </li>
              </ul>
            </div>

            <div class="legend-section">
              <h5>Relic Status</h5>
              <ul class="legend-list">
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <span class="relic-probability legend-probability"><span class="relic-probability__value">%</span></span>
                  </span>
                  <div class="legend-text"><strong>Probability Calculator:</strong> Estimated chance to roll this exact relic layout.</div>
                </li>
                <li class="legend-item legend-item--pillline">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <span class="validity-badge is-valid legend-validity">Valid</span>
                  </span>
                  <div class="legend-text"><strong>Valid Relic:</strong> Indicates that this combination of effects and curses is valid for Online Play.</div>
                </li>
                <li class="legend-item legend-item--pillline">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <span class="validity-badge is-invalid legend-validity">Invalid</span>
                  </span>
                  <div class="legend-text"><strong>Invalid Relic:</strong> Indicates that this combination of effects and curses is not valid for Online Play, and may result in a Warning or Ban.</div>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="utility-popover-source" id="instructionsPopoverChalice" hidden>
          <div class="popover-title">Chalice Builder Instructions</div>
          <div class="popover-body">
            <p>Add your desired effects, and the Chalice Builder will do its best to create valid combinations of relics. If it can't, it will do its best to explain why, and how to fix it.</p>

            <div class="legend-section">
              <h5>Chalice Basics</h5>
              <ul class="legend-list">
                <li class="legend-item legend-item--full">
                  <div class="legend-text"><strong>Add Standard Effects:</strong> Adds an effect from the Standard Relic Type list to the left side of the Chalice Builder.</div>
                </li>
                <li class="legend-item legend-item--full">
                  <div class="legend-text"><strong>Add Depth Effects:</strong> Adds an effect from the Depth of Night Relic Type list to the right side of the Chalice Builder.</div>
                </li>
                <li class="legend-item legend-item--full">
                  <div class="legend-text"><strong>Auto-Grouping:</strong> When three effects are added to a side, they Chalice Builder will combine them into a valid Relic if one can be made. Continue to add effects until you have 9 on a given side to see if your combination is valid.</div>
                </li>
                <li class="legend-item legend-item--full">
                  <div class="legend-text"><strong>Select a Class:</strong> Filters the list of available effects to the currently selected class.</div>
                </li>
                <li class="legend-item legend-item--full">
                  <div class="legend-text"><strong>Select a Chalice:</strong> Shows the colors associated with the selected chalice when making valid relics.</div>
                </li>
              </ul>
            </div>

            <div class="legend-section">
              <h5>Drag & Drop</h5>
              <ul class="legend-list">
                <li class="legend-item legend-item--handle-tall">
                  <span class="legend-icon legend-icon--bare legend-icon--handle-tall" aria-hidden="true">
                    <span class="legend-handle" aria-hidden="true"></span>
                  </span>
                  <div class="legend-text">
                    <div><strong>Swapping Relics:</strong> Grab the colored handle to swap the positioning of two Relics.</div>
                    <div><strong>Swapping Effects:</strong> Grab the colored handle to attempt to swap two effects. If they can be swapped, they will be, and Auto-Sort will be turned off. If not, you'll see a red flash, and they won't swap.</div>
                  </div>
                </li>
              </ul>
            </div>

            <div class="legend-section">
              <h5>Curses</h5>
              <ul class="legend-list">
                <li class="legend-item legend-item--pillline">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <button type="button" class="curse-btn legend-curse-btn" aria-label="Select a Curse" title="Select a Curse" disabled aria-disabled="true" tabindex="-1">Select Curse</button>
                  </span>
                  <div class="legend-text"><strong>Curse required:</strong> Depth effects that need a curse must have one selected for their slot before the trio is valid.</div>
                </li>
              </ul>
            </div>

            <div class="legend-section">
              <h5>Buttons</h5>
              <ul class="legend-list">
                <li class="legend-item">
                  <span class="legend-icon" aria-hidden="true">
                    <span class="legend-toggle-btn legend-toggle-btn--illegal-on">
                      <svg viewBox="0 0 24 24" focusable="false" aria-hidden="true">
                        <path d="M5.75 5.75L18.25 18.25M12 21C7.029 21 3 16.971 3 12S7.029 3 12 3s9 4.029 9 9-4.029 9-9 9Z" fill="none" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                    </span>
                  </span>
                  <div class="legend-text"><strong>Show Illegal Combinations:</strong> Removes the safeties put in place to ensure your combinations are valid. Use with caution.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon" aria-hidden="true">
                    <span class="legend-toggle-btn legend-toggle-btn--autosort-on">
                      <svg viewBox="0 0 24 24" focusable="false" aria-hidden="true">
                        <path d="M8 5l-3 3 3 3M8 8h8M16 19l3-3-3-3M16 16H8" fill="none" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                    </span>
                  </span>
                  <div class="legend-text"><strong>Auto-Sort:</strong> Reorders effects to ensure they are in their proper Roll Order. Turning this off may cause invalid combinations; use with caution.</div>
                </li>
              </ul>
            </div>

            <div class="legend-section">
              <h5>Effect Icons</h5>
              <ul class="legend-list">
                <li class="legend-item">
                  <span class="legend-icon legend-icon--indicator legend-icon--bare" aria-hidden="true">
                    <span class="move-indicator move-up legend-move" style="--icon-size: 1.2rem;"><span class="carrot"></span></span>
                    <span class="move-indicator move-down legend-move" style="--icon-size: 1.2rem;"><span class="carrot"></span></span>
                  </span>
                  <div class="legend-text"><strong>Red arrows:</strong> When Auto-Sort is off, arrows show the direction to move effects to reach a valid Roll Order.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--indicator legend-icon--bare" aria-hidden="true">
                    <span class="move-indicator move-ok legend-move" style="--icon-size: 1.2rem;"><span class="check-box"></span></span>
                  </span>
                  <div class="legend-text"><strong>Green check:</strong> Indicates the effect is good to go; no change needed.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <button type="button" class="icon-btn swap-btn legend-row-btn" aria-label="Change Effect" title="Change Effect">⇄</button>
                  </span>
                  <div class="legend-text"><strong>Change Effect</strong> Change the effect in the selected slot.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <button type="button" class="icon-btn info-btn legend-row-btn" aria-label="Show Effect Info" title="Show Effect Info">i</button>
                  </span>
                  <div class="legend-text"><strong>Information:</strong> Open detailed information about the effect or curse.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <button type="button" class="icon-btn clear-btn legend-row-btn" aria-label="Clear Effect" title="Clear Effect">×</button>
                  </span>
                  <div class="legend-text"><strong>Clear Effect:</strong> Remove the effect from this slot.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare chalice-slot" aria-hidden="true">
                    <button type="button" class="icon-btn dup-btn legend-row-btn" aria-label="Duplicate Effect" title="Duplicate Effect">+</button>
                  </span>
                  <div class="legend-text"><strong>Duplicate Effect:</strong> If the effect is stackable, creates a copy. Up to 3 per side</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <button type="button" class="icon-btn copy-id-btn legend-row-btn" aria-label="Copy Effect ID" title="Copy Effect ID">
                      <span class="effect-copy-icon" aria-hidden="true"></span>
                    </button>
                  </span>
                  <div class="legend-text"><strong>Copy EffectID:</strong> Copy the EffectID to your clipboard.</div>
                </li>
              </ul>
            </div>

            <div class="legend-section">
              <h5>Alerts & Status</h5>
              <ul class="legend-list">
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <span class="legend-alert-icon-wrap">
                      <img src="../Assets/icons/reliquary/chalice-warning.svg" alt="" loading="lazy" />
                      <span class="chalice-alert-counts__badge is-warning chalice-badge--pulse legend-alert-badge">1</span>
                    </span>
                  </span>
                  <div class="legend-text"><strong>Warning Message:</strong> Indicates that there may be a problem with the relic or effect combination.</div>
                </li>
                <li class="legend-item">
                  <span class="legend-icon legend-icon--bare" aria-hidden="true">
                    <span class="legend-alert-icon-wrap">
                      <img src="../Assets/icons/reliquary/chalice-error.svg" alt="" loading="lazy" />
                      <span class="chalice-alert-counts__badge is-error chalice-badge--pulse legend-alert-badge">1</span>
                    </span>
                  </span>
                  <div class="legend-text"><strong>Error Message:</strong> Indicates there is a problem with the relic that would make it illegal.</div>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <!-- MAIN GRID -->
        <section class="main-grid">
          <section id="individualMode" class="mode-panel is-active" aria-label="Individual relic builder">
            <article class="chalice-panel individual-panel">
              <div class="chalice-layout individual-layout">

                <div class="chalice-layout__main individual-layout__main">
                  <aside class="chalice-filter individual-filter" aria-label="Select effects">
                    <div class="panel-header chalice-filter__header">
                      <div class="chalice-filter__header-left">
                          <div class="chalice-filter__title-row" aria-hidden="true">
                            <h4>Select Effects</h4>
                          <div class="chalice-filter__controls individual-filter__controls">
                            <button
                              id="showIllegalBtn"
                              class="utility-toggle"
                              type="button"
                              aria-pressed="false"
                              data-show-illegal="true"
                            >
                              <span class="utility-toggle__icon" aria-hidden="true">
                                <svg class="utility-toggle__svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                  <path d="M5.75 5.75L18.25 18.25M12 21C7.029 21 3 16.971 3 12S7.029 3 12 3s9 4.029 9 9-4.029 9-9 9Z" />
                                </svg>
                              </span>
                              <span class="sr-only">Show Illegal Effect Combinations</span>
                            </button>
                            <button
                              id="autoSortToggle"
                              class="utility-toggle"
                              type="button"
                              aria-pressed="true"
                              data-auto-sort-toggle="true"
                            >
                              <span class="utility-toggle__icon" aria-hidden="true">
                                <svg class="utility-toggle__svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                  <path d="M8 5l-3 3 3 3M8 8h8M16 19l3-3-3-3M16 16H8" />
                                </svg>
                              </span>
                              <span class="sr-only">Auto-Sort Enabled</span>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="panel-header__right chalice-filter__header-right individual-filter__header-right">
                        <span class="pill pill--ghost individual-filter__count" aria-live="polite" hidden></span>
                        <div class="chalice-filter__selectors chalice-filter__selectors--inline individual-filter__selectors">
                          <div id="classFilterSlotIndividual" class="utility-field-slot">
                            <label id="classFilterControl" class="utility-field" aria-label="Class">
                              <select id="classFilter">
                                <option value="" selected>-- Class / All --</option>
                              </select>
                            </label>
                          </div>
                          <div id="relicTypeSlot" class="utility-field-slot">
                            <label id="relicTypeControl" class="utility-field">
                              <select id="relicType">
                                <option value="" selected>-- Relic Type --</option>
                                <option value="Standard">Standard</option>
                                <option value="Depth Of Night">Depth Of Night</option>
                              </select>
                            </label>
                          </div>
                        </div>
                        <div class="individual-quick-row" aria-label="Quick controls">
                          <div class="quick-tile">
                            <button id="classPortraitBtn" class="mini-tile mini-tile--portrait" type="button" aria-haspopup="menu" aria-expanded="false" aria-controls="classPortraitMenu">
                              <span class="mini-tile__hint">Select Character</span>
                              <span class="sr-only">Select Class</span>
                            </button>
                            <div id="classPortraitMenu" class="mini-tile-menu" hidden role="menu" aria-label="Select Class"></div>
                          </div>
                          <div class="quick-tile">
                            <button id="relicThumb" class="mini-tile mini-tile--relic" type="button" aria-label="Relic preview" aria-haspopup="menu" aria-expanded="false" aria-controls="relicTypeMenu" disabled>
                              <span class="mini-tile__hint">Relic Type</span>
                              <span class="mini-tile__selection" id="relicThumbSelection" aria-live="polite"></span>
                              <span class="mini-tile__color-chip" aria-hidden="true"></span>
                            </button>
                            <div id="relicTypeMenu" class="mini-tile-menu" hidden role="menu" aria-label="Select Relic Type"></div>
                            <div id="relicTypePopover" class="relic-type-popover" hidden></div>
                          </div>
                        </div>
                        <div class="individual-filter__actions individual-filter__actions--split">
                          <button id="instructionsBtn" class="utility-ghost utility-ghost--small" type="button">Instructions</button>
                          <div id="startOverSlotIndividual" class="utility-field-slot utility-field-slot--inline">
                            <button id="startOver" class="secondary" type="button">Start Over</button>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="chalice-filter__body individual-filter__body"></div>
                  </aside>

                  <div class="individual-view">
                    <aside class="chalice-layout__results individual-details" aria-label="Relic details">
                      <article id="details" class="chalice-results individual-details__panel">
                        <div class="panel-header individual-details__header">
                          <h3>Details</h3>
                          <div class="individual-details__actions">
                            <div id="toggleSlotIndividual" class="individual-filter__toggle-slot individual-filter__toggle-slot--details"></div>
                            <span id="detailsIssueBadge" class="details-issue-badge" hidden aria-live="polite"></span>
                            <button
                              id="detailsToggleMobile"
                              class="details-toggle-btn"
                              type="button"
                              aria-expanded="false"
                              aria-controls="detailsBody"
                            >
                              Show details
                            </button>
                          </div>
                        </div>

                        <div id="detailsBody" class="details-body"></div>
                      </article>
                    </aside>

                    <section class="chalice-layout__middle individual-preview" aria-label="Relic preview">
                      <div class="chalice-grid individual-preview-grid">
                        <article id="results" class="chalice-column individual-preview__panel">
                          <div class="panel-header">
                            <h3>Relic Preview</h3>
                            <div class="panel-header__right">
                              <div id="relicProbability" class="relic-probability" role="status" aria-live="polite" hidden>
                                <span id="relicProbabilityValue" class="relic-probability__value">%</span>
                              </div>
                              <span id="relicValidity" class="validity-badge" hidden>Valid</span>
                              <button id="autoSortBtn" class="auto-sort-btn utility-ghost utility-ghost--small" type="button" hidden>Auto-Sort</button>
                            </div>
                          </div>

                          <div class="relic-preview">
                            <div class="relic-frame">
                              <img id="relicImg" alt="Relic preview" />
                              <div id="relicColorControl" class="relic-color-control" hidden>
                                <button
                                  id="relicColorChip"
                                  class="relic-color-chip"
                                  type="button"
                                  aria-haspopup="listbox"
                                  aria-expanded="false"
                                >
                                  <span class="sr-only">Relic color</span>
                                </button>
                                <div id="relicColorMenu" class="relic-color-menu" role="listbox" aria-label="Choose relic color"></div>
                              </div>
                            </div>

                            <div class="relic-effects">
                              <div class="slot-counts">
                                <small class="subtext" id="count1"></small>
                                <small class="subtext" id="count2"></small>
                                <small class="subtext" id="count3"></small>
                              </div>
                              <ul class="chosen-effects" id="chosenList"></ul>
                            </div>
                          </div>
                        </article>
                      </div>
                    </section>
                  </div>
                </div>
              </div>
            </article>
          </section>

          <section id="chaliceMode" class="mode-panel" aria-label="Chalice builder" hidden>
            <div class="chalice-mode-tabs">
              <div id="modeTabsChaliceSlot" class="mode-tabs-slot mode-tabs-slot--chalice"></div>
            </div>
            <article class="chalice-panel">
              <div class="chalice-layout" id="chaliceLayout" data-details-state="collapsed">
                <div class="chalice-layout__main">
                  <aside class="chalice-filter" aria-label="Effect pool">
                    <div class="panel-header chalice-filter__header">
                      <div class="chalice-filter__header-left">
                        <div class="chalice-filter__title-row">
                          <h4>Select Effects</h4>
                          <div class="individual-filter__controls individual-filter__controls--chalice">
                            <button
                              id="showIllegalBtnChalice"
                              class="utility-toggle"
                              type="button"
                              aria-pressed="false"
                              data-show-illegal="true"
                            >
                              <span class="utility-toggle__icon" aria-hidden="true">
                                <svg class="utility-toggle__svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                  <path d="M5.75 5.75L18.25 18.25M12 21C7.029 21 3 16.971 3 12S7.029 3 12 3s9 4.029 9 9-4.029 9-9 9Z" />
                                </svg>
                              </span>
                              <span class="sr-only">Show Illegal Effect Combinations</span>
                            </button>
                            <button
                              id="autoSortToggleChalice"
                              class="utility-toggle"
                              type="button"
                              aria-pressed="true"
                              data-auto-sort-toggle="true"
                            >
                              <span class="utility-toggle__icon" aria-hidden="true">
                                <svg class="utility-toggle__svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                  <path d="M8 5l-3 3 3 3M8 8h8M16 19l3-3-3-3M16 16H8" />
                                </svg>
                              </span>
                              <span class="sr-only">Auto-Sort Enabled</span>
                            </button>
                            <span
                              id="chaliceIllegalErrorBadge"
                              class="chalice-header-alert-badge chalice-alert-counts__badge is-error"
                              hidden
                              aria-hidden="true"
                            ></span>
                            <span
                              id="chaliceAutoSortWarningBadge"
                              class="chalice-header-alert-badge chalice-alert-counts__badge is-warning"
                              hidden
                              aria-hidden="true"
                            ></span>
                            <span class="pill pill--auto-sort" data-auto-sort-pill hidden>Auto-Sort Off</span>
                          </div>
                        </div>
                      </div>
                      <div class="panel-header__right chalice-filter__header-right">
                        <div class="chalice-filter__selectors chalice-filter__selectors--inline chalice-filter__selectors--compact">
                          <div id="classFilterSlotChalice" class="utility-field-slot"></div>
                          <div id="chalicePickerSlot" class="utility-field-slot">
                            <label id="chalicePickerControl" class="utility-field">
                              <select id="chaliceSelect" aria-label="Chalice"></select>
                            </label>
                          </div>
                        </div>
                        <span class="pill pill--ghost chalice-filter__count" id="chaliceFilterTotals" aria-live="polite"></span>
                        <button id="instructionsBtnChalice" class="utility-ghost utility-ghost--small" type="button">Instructions</button>
                        <div id="startOverSlotChalice" class="utility-field-slot utility-field-slot--inline"></div>
                      </div>
                    </div>
                    <div class="chalice-filter__body">

                      <div class="chalice-filter__actions">
                        <button id="chaliceAddStandard" class="chalice-filter__btn" type="button">
                          <span class="chalice-filter__btn-label">Add Standard Effect</span>
                          <span class="pill pill--ghost chalice-filter__btn-pill" id="chaliceStandardCount" aria-live="polite"></span>
                        </button>
                        <button id="chaliceAddDepth" class="chalice-filter__btn chalice-filter__btn--depth" type="button">
                          <span class="chalice-filter__btn-label">Add Depth Effect</span>
                          <span class="pill pill--ghost chalice-filter__btn-pill" id="chaliceDepthCount" aria-live="polite"></span>
                        </button>
                      </div>
                    </div>
                  </aside>

                  <section class="chalice-layout__middle" aria-label="Chalice slots">
                    <div class="chalice-grid">
                      <article class="chalice-column" data-side="standard">
                        <div class="panel-header">
                          <div class="panel-header__title-row">
                            <h4>Standard Relics</h4>
                            <div class="chalice-color-dots" id="chaliceStandardColors"></div>
                          </div>
                        </div>
                        <ol class="chalice-slot-list" id="chaliceStandardList"></ol>
                      </article>

                      <article class="chalice-column" data-side="depth">
                        <div class="panel-header">
                          <div class="panel-header__title-row">
                            <h4>Depth of Night Relics</h4>
                            <div class="chalice-color-dots" id="chaliceDepthColors"></div>
                          </div>
                        </div>
                        <ol class="chalice-slot-list" id="chaliceDepthList"></ol>
                      </article>
                    </div>
                  </section>
                </div>

                <aside class="chalice-layout__results" id="chaliceResultsPane" aria-label="Generated relics">
                  <article class="chalice-results" id="chaliceDetails" data-details-state="collapsed">
                    <div class="chalice-results__frame">
                        <div class="details-rail" aria-hidden="true">
                          <div id="chaliceAlertIconStack" class="chalice-alert-icon-stack" hidden aria-hidden="true">
                            <img id="chaliceAlertIconWarning" class="chalice-alert-icon" alt="Warnings present" hidden />
                            <div id="chaliceAlertCountsWarning" class="chalice-alert-counts" aria-hidden="true"></div>
                            <img id="chaliceAlertIconError" class="chalice-alert-icon" alt="Errors present" hidden />
                            <div id="chaliceAlertCountsError" class="chalice-alert-counts" aria-hidden="true"></div>
                          </div>
                        </div>

                      <div class="chalice-full__top chalice-results__toggle-slot">
                        <button
                          id="chaliceResultsToggle"
                          class="utility-ghost utility-ghost--small chalice-results__toggle"
                          type="button"
                          aria-pressed="false"
                          aria-expanded="false"
                          aria-controls="chaliceResultsContent"
                          aria-label="Toggle details panel"
                        >
                          <span class="sr-only">Toggle details panel</span>
                        </button>
                      </div>

                      <div class="panel-header chalice-filter__header chalice-details__header chalice-results__header">
                        <div class="chalice-results__header-left">
                          <div class="chalice-filter__title-row chalice-details__title-row">
                            <h4 class="chalice-details__title">
                              <span class="chalice-details__title-text">Details</span>
                            </h4>
                          </div>
                        </div>
                        <div class="chalice-results__header-actions">
                          <button
                            id="chaliceAutoSortBtn"
                            class="auto-sort-btn utility-ghost utility-ghost--small"
                            type="button"
                            hidden
                          >
                            Auto-Sort
                          </button>
                          <button
                            id="chaliceDetailsCollapseBtnFull"
                            class="utility-ghost utility-ghost--small chalice-details__btn chalice-details__btn--collapse"
                            type="button"
                            aria-label="Collapse details"
                            title="Collapse details"
                          >
                            <span class="sr-only">Collapse details</span>
                          </button>
                        </div>
                      </div>

                      <div class="details-shell" id="detailsShell">
                        <div class="panel-header chalice-filter__header chalice-details__header">
                          <div class="chalice-filter__header-left">
                            <div class="chalice-filter__title-row chalice-details__title-row">
                              <h4 class="chalice-details__title">
                                <span class="chalice-details__title-text">Details</span>
                              </h4>
                            </div>
                          </div>
                          <div class="chalice-details__actions">
                            <button
                              id="chaliceDetailsCollapseBtn"
                              class="utility-ghost utility-ghost--small chalice-details__btn chalice-details__btn--collapse"
                              type="button"
                              aria-label="Collapse details"
                              title="Collapse details"
                            >
                              <span class="sr-only">Collapse details</span>
                            </button>
                          </div>
                        </div>

                        <div class="chalice-results__content" id="chaliceResultsContent" aria-hidden="true">
                          <div id="chaliceAlertPanelWarning" class="chalice-alert-panel is-warning" role="status" hidden>
                            <div class="chalice-alert-panel__header">
                              <div id="chaliceAlertPanelTitleWarning" class="chalice-alert-panel__title">Warnings detected</div>
                            </div>
                            <ul id="chaliceAlertListWarning" class="chalice-alert-panel__list"></ul>
                          </div>
                          <div id="chaliceAlertPanelError" class="chalice-alert-panel is-error" role="status" hidden>
                            <div class="chalice-alert-panel__header">
                              <div id="chaliceAlertPanelTitleError" class="chalice-alert-panel__title">Errors detected</div>
                            </div>
                            <ul id="chaliceAlertListError" class="chalice-alert-panel__list"></ul>
                          </div>
                          <section class="stat-overview" id="statOverviewSection" aria-label="Stat overview">
                            <div class="stat-overview__header">
                              <div id="statOverviewPortrait" class="stat-overview__portrait" aria-label="Character portrait placeholder"></div>
                              <div class="stat-overview__identity">
                                <div class="stat-overview__name" id="statOverviewName">Character Name</div>
                                <div class="stat-overview__vitals" aria-label="Character vitals">
                                  <div class="stat-overview__vital">
                                    <span class="stat-overview__vital-icon" aria-hidden="true">HP</span>
                                    <span class="stat-overview__vital-value" id="statOverviewHP">0.00%</span>
                                  </div>
                                  <div class="stat-overview__vital">
                                    <span class="stat-overview__vital-icon" aria-hidden="true">FP</span>
                                    <span class="stat-overview__vital-value" id="statOverviewFP">0.00%</span>
                                  </div>
                                  <div class="stat-overview__vital">
                                    <span class="stat-overview__vital-icon" aria-hidden="true">ST</span>
                                    <span class="stat-overview__vital-value" id="statOverviewST">0.00%</span>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <div class="stat-overview__section">
                              <div class="stat-overview__section-title">Attributes</div>
                              <div class="stat-overview__box-grid" id="statOverviewAttributes"></div>
                              <div class="stat-overview__extras" id="statOverviewAttributesExtras"></div>
                            </div>

                            <div class="stat-overview__section">
                              <div class="stat-overview__section-title">Attack</div>
                              <div class="stat-overview__box-grid stat-overview__box-grid--tight" id="statOverviewAttack"></div>
                              <div class="stat-overview__extras" id="statOverviewAttackExtras"></div>
                            </div>

                            <div class="stat-overview__section">
                              <div class="stat-overview__section-title">Defense</div>
                              <div class="stat-overview__box-grid stat-overview__box-grid--tight" id="statOverviewDefense"></div>
                              <div class="stat-overview__extras" id="statOverviewDefenseExtras"></div>
                            </div>

                            <div class="stat-overview__section">
                              <div class="stat-overview__section-title">Utility</div>
                              <div class="stat-overview__extras" id="statOverviewUtilityExtras"></div>
                            </div>

                            <div class="stat-overview__section" id="statOverviewOtherSection">
                              <div class="stat-overview__section-title">Other Effects</div>
                              <ul class="stat-overview__list" id="statOverviewOther"></ul>
                            </div>
                          </section>

                          <div class="chalice-results__takeover-note" id="chaliceResultsTakeoverNote" role="status" hidden>
                            Coming soon: full relic breakdowns in takeover view.
                          </div>
                        </div>
                      </div>

                      <div class="chalice-results__full" id="chaliceResultsFullCol" aria-hidden="false">
                        <article class="chalice-full__panel" aria-labelledby="chaliceFullHeading">
                          <div class="chalice-full__body" id="chaliceFullBody" role="status">
                            <div class="chalice-full__coming-soon">Coming Soon</div>
                          </div>
                        </article>
                      </div>
                    </div>
                  </article>
                </aside>
              </div>
            </article>
          </section>
        </section>

        <!-- FOOTER (global) -->
        <footer id="globalFooter" class="site-footer"></footer>

      </section>

    </main>
    <script type="module" src="../scripts/hero.js"></script>
    <script type="module" src="./reliquary.js"></script>
    <script type="module" src="../scripts/chrome.js"></script>
</body>
</html>
